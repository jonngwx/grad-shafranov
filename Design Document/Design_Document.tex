%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Short Sectioned Assignment
% LaTeX Template
% Version 1.0 (5/5/12)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Original author:
% Frits Wenneker (http://www.howtotex.com)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[paper=a4, fontsize=11pt]{scrartcl} % A4 paper and 11pt font size

\usepackage[T1]{fontenc} % Use 8-bit encoding that has 256 glyphs
\usepackage{fourier} % Use the Adobe Utopia font for the document - comment this line to return to the LaTeX default
\usepackage[english]{babel} % English language/hyphenation
\usepackage{amsmath,amsfonts,amsthm} % Math packages

\usepackage{lipsum} % Used for inserting dummy 'Lorem ipsum' text into the template

\usepackage{sectsty} % Allows customizing section commands
\allsectionsfont{\centering \normalfont\scshape} % Make all sections centered, the default font and small caps

\usepackage{fancyhdr} % Custom headers and footers
\pagestyle{fancyplain} % Makes all pages in the document conform to the custom headers and footers
\fancyhead{} % No page header - if you want one, create it in the same way as the footers below
\fancyfoot[L]{} % Empty left footer
\fancyfoot[C]{} % Empty center footer
\fancyfoot[R]{\thepage} % Page numbering for right footer
\renewcommand{\headrulewidth}{0pt} % Remove header underlines
\renewcommand{\footrulewidth}{0pt} % Remove footer underlines
\setlength{\headheight}{13.6pt} % Customize the height of the header

\numberwithin{equation}{section} % Number equations within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)
\numberwithin{figure}{section} % Number figures within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)
\numberwithin{table}{section} % Number tables within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)

\setlength\parindent{0pt} % Removes all indentation from paragraphs - comment this line for an assignment with lots of text

%----------------------------------------------------------------------------------------
%	TITLE SECTION
%----------------------------------------------------------------------------------------

\newcommand{\horrule}[1]{\rule{\linewidth}{#1}} % Create horizontal rule command with 1 argument of height

\title{	
\normalfont \normalsize 
%\textsc{APC 524} \\ [25pt] % Your university, school and/or department name(s)
\horrule{0.5pt} \\[0.4cm] % Thin top horizontal rule
\huge  MHD Equilibrium Reconstruction Code - Design Document\\ % The assignment title
\horrule{2pt} \\[0.5cm] % Thick bottom horizontal rule
}

\author{Peter Bolgert (pbolgert@pppl.gov), Jonathan Ng (wng@pppl.gov), \\ Elizabeth Paul (epaul@princeton.edu), Jacob Schwartz (jschwart@pppl.gov)} % Your name

\date{\normalsize\today} % Today's date or a custom date

\begin{document}

\maketitle % Print the title

%----------------------------------------------------------------------------------------
%	Section 1
%----------------------------------------------------------------------------------------

\section{Overview}

blah blah blah: Peter's section

The Grad-Shafranov equation is

\begin{equation}
\Delta^{*} \Psi + \mu_0 R^2 \frac{dp}{d\Psi} + g \frac{dg}{d\Psi} = 0.
\end{equation}


%----------------------------------------------------------------------------------------
%	Section 2
%----------------------------------------------------------------------------------------

\section{Code Organization}

Jonathan's section
\newline

this section would also include "make versus buy" info? (Jacob)

%----------------------------------------------------------------------------------------
%	Section 3
%----------------------------------------------------------------------------------------

\section{User Interface}

The program will be called from the command line and take as an argument an input (text) file. 

The text file will contain key-value pairs including
\begin{itemize}
\item Path to a file describing external currents (from coils outside the plasma).
\item Path to a file describing experimental measurements of B at various points outside the plasma.
\item Path to a file with inital guess for the $p(\Psi)$ and $g(\Psi)$ functions.
\item Path to a file with a specified boundary $\Psi$: this will be useful in testing the inner loop.
\item TRUE/FALSE Switch to control whether the former is used, or a boundary $\Psi$ is generated.
\item initial $J_\phi$ parameters
\item Maximum iterations of outer loop
\item Maximum iterations of inner loop
\item error goals for outer loop
\item error goals for inner loop
\item Name for output file
\item Whether to output for every $n$
\item Whether to output for every $m$ (these will be useful in debugging / so a user can watch the solution converge)
\item Whether to output $J$, $p$ and $q$ as well as $\Psi$ for each cell in the final output.
\end{itemize}

For some of these key-value pairs, there may be default values if none is specified, while for others, the program will terminate with an error message if no key/value is specified.

The input file of external currents will be a tab-separated table of radial location, R (meters), vertical coordinate, Z (meters) and I (amps) for each poloidal field coil. The toroidal field current will be entered as a special entry with R = 0 and Z = 0: in an axisymmetric solenoid the toroidal field must die off like 1/radius, so only the total current matters, not the shape of the toroidal field coils.

The input file of external magnetic field measurements will be similar: a tab-separated table of R, Z, and measured $\text{B}_\phi$, $\text{B}_\R$, and $\text{B}_Z$.

For output, we will an hdf5 format. The file will include the calculated solution for $\Psi$ and also (if the user specifies) tables for $J_\phi$, $p$, and/or $q$. If the user so specifies, each inner and /or outer loop's result for $\Psi$ will also be output to this file.

In order to read the hdf5 files, a python visualizer using matplotlib will be written. It will show contour plots for the tables in the output file and also be able to take slices through the tables at the machine midplane.

%----------------------------------------------------------------------------------------
%	Section 4
%----------------------------------------------------------------------------------------

\section{Schedule and Divison of Labor}

Elizabeth's section
\newline

This section should identify intermediate goals we hope to achieve along the way

%----------------------------------------------------------------------------------------
%	Section 5
%----------------------------------------------------------------------------------------

\section{Risks}

Also Elizabeth's section

\end{document}
